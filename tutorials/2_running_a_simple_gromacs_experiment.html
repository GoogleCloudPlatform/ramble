<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2) Running A Simple GROMACS Experiment &mdash; Ramble 0.4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=6c02275b"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3) Modifying A GROMACS Experiment" href="3_modifying_a_gromacs_experiment.html" />
    <link rel="prev" title="1) Getting Started Running A “Hello World” Experiment" href="1_hello_world.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                0.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_hello_world.html">1) Getting Started Running A “Hello World” Experiment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2) Running A Simple GROMACS Experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#application-information">Application Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-experiments">Configuring experiments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-and-activate-a-workspace">Create and Activate a Workspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-the-workspace">Configure the Workspace</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-experiments">Setting Up the Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-experiments">Executing Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyzing-experiments">Analyzing Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workspace-directory-structure">Workspace Directory Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleanup-the-workspace">Cleanup the Workspace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3_modifying_a_gromacs_experiment.html">3) Modifying A GROMACS Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_using_vectors_and_matrices.html">4) Using Vectors and Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_changing_your_software_stack.html">5) Changing A Software Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_configuring_a_scaling_study.html">6) Configuring a Scaling Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_using_zips_and_matrices.html">7) Zips and Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="8_var_expansion_indirection_and_stack_parameterization.html">8) Variable Expansion, Indirection, and Software Stack Parameterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_success_criteria.html">9) Success Criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_using_modifiers.html">10) Modifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_using_internals.html">11) Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="mirrors.html">Mirrors</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ramble.html">ramble package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_files.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workspace.html">Ramble Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workspace_config.html">Workspace Configuration File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../success_criteria.html">Success Criteria</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GoogleCloudPlatform/ramble#contributing">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guides.html">Developer Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/spack/spack">Spack</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ramble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../tutorials.html">Tutorials</a></li>
      <li class="breadcrumb-item active">2) Running A Simple GROMACS Experiment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/2_running_a_simple_gromacs_experiment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-a-simple-gromacs-experiment">
<span id="running-an-experiment-tutorial"></span><h1>2) Running A Simple GROMACS Experiment<a class="headerlink" href="#running-a-simple-gromacs-experiment" title="Link to this heading"></a></h1>
<p>In this tutorial, you will set up and run a benchmark simulation using
<a class="reference external" href="https://www.gromacs.org/">GROMACS</a>, a free and open-source application
for molecular dynamics.</p>
<p>This tutorial builds off of concepts introduced in previous tutorials. Please
make sure you review those before starting with this tutorial’s content,
however this tutorial is fully stand-alone as far as steps you need to perform.</p>
<section id="application-information">
<h2>Application Information<a class="headerlink" href="#application-information" title="Link to this heading"></a></h2>
<p>As mentioned above, this tutorial uses the <a class="reference external" href="https://www.gromacs.org/">GROMACS</a>
application definition. We will begin with the <code class="docutils literal notranslate"><span class="pre">water_bare</span></code> and <code class="docutils literal notranslate"><span class="pre">water_gmx50</span></code>
workloads, as they are able to execute in a short amount of time.</p>
<p>Using a previously installed <code class="docutils literal notranslate"><span class="pre">ramble</span></code>, the following command can be used to
get information about these workloads:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>info<span class="w"> </span>gromacs
</pre></div>
</div>
<p>Searching the output for the sections marked <code class="docutils literal notranslate"><span class="pre">Workload:</span> <span class="pre">water_bare</span></code> and
<code class="docutils literal notranslate"><span class="pre">Workload:</span> <span class="pre">water_gmx50</span></code>, you should see something like the following output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Workload: water_gmx50</span>
<span class="go">    Executables: [&#39;builtin::env_vars&#39;, &#39;builtin::spack_source&#39;, &#39;builtin::spack_activate&#39;, &#39;pre-process&#39;, &#39;execute-gen&#39;]</span>
<span class="go">    Inputs: [&#39;water_gmx50_bare&#39;]</span>
<span class="go">    Variables:</span>
<span class="go">        size:</span>
<span class="go">            Description: Workload size</span>
<span class="go">            Default: 1536</span>
<span class="go">            Suggested Values: [&#39;0000.65&#39;, &#39;0000.96&#39;, &#39;0001.5&#39;, &#39;0003&#39;, &#39;0006&#39;, &#39;0012&#39;, &#39;0024&#39;, &#39;0048&#39;, &#39;0096&#39;, &#39;0192&#39;, &#39;0384&#39;, &#39;0768&#39;, &#39;1536&#39;, &#39;3072&#39;]</span>
<span class="go">        type:</span>
<span class="go">            Description: Workload type.</span>
<span class="go">            Default: pme</span>
<span class="go">            Suggested Values: [&#39;pme&#39;, &#39;rf&#39;]</span>
<span class="go">        input_path:</span>
<span class="go">            Description: Input path for water GMX50</span>
<span class="go">            Default: {water_gmx50_bare}/{size}</span>
<span class="go">Workload: water_bare</span>
<span class="go">    Executables: [&#39;builtin::env_vars&#39;, &#39;builtin::spack_source&#39;, &#39;builtin::spack_activate&#39;, &#39;pre-process&#39;, &#39;execute-gen&#39;]</span>
<span class="go">    Inputs: [&#39;water_bare_hbonds&#39;]</span>
<span class="go">    Variables:</span>
<span class="go">        size:</span>
<span class="go">            Description: Workload size</span>
<span class="go">            Default: 1536</span>
<span class="go">            Suggested Values: [&#39;0000.65&#39;, &#39;0000.96&#39;, &#39;0001.5&#39;, &#39;0003&#39;, &#39;0006&#39;, &#39;0012&#39;, &#39;0024&#39;, &#39;0048&#39;, &#39;0096&#39;, &#39;0192&#39;, &#39;0384&#39;, &#39;0768&#39;, &#39;1536&#39;, &#39;3072&#39;]</span>
<span class="go">        type:</span>
<span class="go">            Description: Workload type.</span>
<span class="go">            Default: pme</span>
<span class="go">            Suggested Values: [&#39;pme&#39;, &#39;rf&#39;]</span>
<span class="go">        input_path:</span>
<span class="go">            Description: Input path for water bare hbonds</span>
<span class="go">            Default: {water_bare_hbonds}/{size}</span>
</pre></div>
</div>
<p>Here we see that both of these workloads have a <code class="docutils literal notranslate"><span class="pre">type</span></code> variable (with
possible values of <code class="docutils literal notranslate"><span class="pre">pme</span></code> and <code class="docutils literal notranslate"><span class="pre">rf</span></code>) and a <code class="docutils literal notranslate"><span class="pre">size</span></code> variable with a variety
of available sizes.</p>
<p>Towards the bottom of the output you should also see information about a valid
software configuration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Default Compilers:</span>
<span class="go"> gcc9:</span>
<span class="go">   spack_spec = gcc@9.3.0</span>

<span class="go"> Software Specs:</span>
<span class="go">   impi2018:</span>
<span class="go">     spack_spec = intel-mpi@2018.4.274</span>
<span class="go">   gromacs:</span>
<span class="go">     spack_spec = gromacs@2020.5</span>
<span class="go">     compiler = gcc9</span>
</pre></div>
</div>
<p>This output does not represent the only possible configuration that works for
this application, it only presents a good starting point. When using Ramble,
these can be modified freely and will be explored in a later tutorial.</p>
</section>
<section id="configuring-experiments">
<h2>Configuring experiments<a class="headerlink" href="#configuring-experiments" title="Link to this heading"></a></h2>
<p>For this tutorial, you are going to focus on creating experiments from the
<code class="docutils literal notranslate"><span class="pre">water_bare</span></code> and <code class="docutils literal notranslate"><span class="pre">water_gmx50</span></code> workloads. The default configuration will
contain experiments for each value of the <code class="docutils literal notranslate"><span class="pre">type</span></code> variable, and a single value
for the <code class="docutils literal notranslate"><span class="pre">size</span></code> variable.</p>
<p>You will use a Ramble workspace to manage these experiments.</p>
<section id="create-and-activate-a-workspace">
<h3>Create and Activate a Workspace<a class="headerlink" href="#create-and-activate-a-workspace" title="Link to this heading"></a></h3>
<p>Before you can configure your GROMACS experiments, you’ll need to set up a
workspace. You can call this workspace <code class="docutils literal notranslate"><span class="pre">basic_gromacs</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>create<span class="w"> </span>basic_gromacs
</pre></div>
</div>
<p>This will create a workspace for you in:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">$RAMBLE_ROOT</span>/var/ramble/workspaces/basic_gromacs
</pre></div>
</div>
<p>Now you can activate the workspace and view its default configuration.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>activate<span class="w"> </span>basic_gromacs
<span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>info
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">ramble</span> <span class="pre">workspace</span> <span class="pre">info</span></code> command after editing configuration
files to see how ramble would use the changes you made.</p>
</section>
<section id="configure-the-workspace">
<h3>Configure the Workspace<a class="headerlink" href="#configure-the-workspace" title="Link to this heading"></a></h3>
<p>Within the workspace directory, ramble creates a directory named <code class="docutils literal notranslate"><span class="pre">configs</span></code>.
This directory contains generated configuration and template files. Each of
these files can be edited to configure the workspace, and examples will be
provided below.</p>
<p>The available files are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ramble.yaml</span></code> This file describes all aspects of the workspace. This includes the software stack, the experiments, and all variables.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">execute_experiment.tpl</span></code> This file is a template shell script that will be rendered to execute each of the experiments that ramble generates.</p></li>
</ul>
</div></blockquote>
<p>You can edit these files directly or with the command <code class="docutils literal notranslate"><span class="pre">ramble</span> <span class="pre">workspace</span> <span class="pre">edit</span></code>.</p>
<p>To begin, you should edit the <code class="docutils literal notranslate"><span class="pre">ramble.yaml</span></code> file to set up the configuration
for your experiments. For this tutorial, replace the default yaml text with the
contents of <code class="docutils literal notranslate"><span class="pre">$RAMBLE_ROOT/examples/basic_gromacs_config.yaml</span></code>:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">ramble</span><span class="p">:</span>
<span class="w">  </span><span class="nt">env_vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">set</span><span class="p">:</span>
<span class="w">      </span><span class="nt">OMP_NUM_THREADS</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{n_threads}&#39;</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">processes_per_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<span class="w">    </span><span class="nt">mpi_command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;mpirun</span><span class="nv"> </span><span class="s">-n</span><span class="nv"> </span><span class="s">{n_ranks}</span><span class="nv"> </span><span class="s">-ppn</span><span class="nv"> </span><span class="s">{processes_per_node}&#39;</span>
<span class="w">    </span><span class="nt">batch_submit</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{execute_experiment}&#39;</span>
<span class="w">  </span><span class="nt">applications</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gromacs</span><span class="p">:</span><span class="w"> </span><span class="c1"># Application name</span>
<span class="w">      </span><span class="nt">workloads</span><span class="p">:</span>
<span class="w">        </span><span class="nt">water_gmx50</span><span class="p">:</span><span class="w"> </span><span class="c1"># Workload name from application</span>
<span class="w">          </span><span class="nt">experiments</span><span class="p">:</span>
<span class="w">            </span><span class="nt">pme_single_rank</span><span class="p">:</span><span class="w"> </span><span class="c1"># Arbitrary experiment name</span>
<span class="w">              </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">                </span><span class="nt">n_ranks</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">n_threads</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0003&#39;</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pme&#39;</span>
<span class="w">            </span><span class="nt">rf_single_rank</span><span class="p">:</span>
<span class="w">              </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">                </span><span class="nt">n_ranks</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">n_threads</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0003&#39;</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rf&#39;</span>
<span class="w">        </span><span class="nt">water_bare</span><span class="p">:</span>
<span class="w">          </span><span class="nt">experiments</span><span class="p">:</span>
<span class="w">            </span><span class="nt">pme_single_rank</span><span class="p">:</span>
<span class="w">              </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">                </span><span class="nt">n_ranks</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">n_threads</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0003&#39;</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pme&#39;</span>
<span class="w">            </span><span class="nt">rf_single_rank</span><span class="p">:</span>
<span class="w">              </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">                </span><span class="nt">n_ranks</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">n_threads</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">                </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0003&#39;</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rf&#39;</span>
<span class="w">  </span><span class="nt">spack</span><span class="p">:</span>
<span class="w">    </span><span class="nt">packages</span><span class="p">:</span>
<span class="w">      </span><span class="nt">gcc9</span><span class="p">:</span>
<span class="w">        </span><span class="nt">spack_spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcc@9.4.0 target=x86_64</span>
<span class="w">        </span><span class="nt">compiler_spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcc@9.4.0</span>
<span class="w">      </span><span class="nt">impi2018</span><span class="p">:</span>
<span class="w">        </span><span class="nt">spack_spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">intel-mpi@2018.4.274 target=x86_64</span>
<span class="w">        </span><span class="nt">compiler</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcc9</span>
<span class="w">      </span><span class="nt">gromacs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">spack_spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gromacs@2021.6</span>
<span class="w">        </span><span class="nt">compiler</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcc9</span>
<span class="w">    </span><span class="nt">environments</span><span class="p">:</span>
<span class="w">      </span><span class="nt">gromacs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">packages</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gromacs</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">impi2018</span>
</pre></div>
</div>
<p>Note that specifying compilers that Spack doesn’t have installed may take a while.
To see available compilers, use <code class="docutils literal notranslate"><span class="pre">spack</span> <span class="pre">compilers</span></code> or see <a class="reference external" href="https://spack.readthedocs.io/en/latest/getting_started.html#spack-compilers">Spack documentation</a>
for more information.</p>
<p>The second file you should edit is the <code class="docutils literal notranslate"><span class="pre">execute_experiment.tpl</span></code> template file.
This file contains a template script that will be rendered into an execution
script for each generated experiment. You can feel free to edit it as you need
to for your given system, but for this tutorial the default value will work.</p>
</section>
</section>
<section id="setting-up-the-experiments">
<h2>Setting Up the Experiments<a class="headerlink" href="#setting-up-the-experiments" title="Link to this heading"></a></h2>
<p>Now that the workspace is configured correctly, you can set up the experiments
in the active workspace using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>setup
</pre></div>
</div>
<p>This command will create experiment directories, download and expand input files,
and install the required software stack (and generate spack environments for
each workload).</p>
<p>It can take a bit to run depending on if you need to build new software and how
long the input files take to download. If you’d like to see what will be installed,
you can do a dry run of the setup using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>setup<span class="w"> </span>--dry-run
</pre></div>
</div>
<p>For each setup run, a set of logs will be created at:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">$RAMBLE_ROOT</span>/var/ramble/workspaces/<span class="nv">$workspace_root</span>/logs
</pre></div>
</div>
<p>Each run will have its own primary log, along with a folder containing a log
for each experiment that is being configured. While setup is running, you can
monitor the process by looking at the contents of:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">$RAMBLE_ROOT</span>/var/ramble/workspaces/basic_gromacs/logs/setup.latest/gromacs.water_gmx50.pme_single_rank.out
</pre></div>
</div>
</section>
<section id="executing-experiments">
<h2>Executing Experiments<a class="headerlink" href="#executing-experiments" title="Link to this heading"></a></h2>
<p>After the workspace is set up, its experiments can be executed. The two methods
to run the experiments are:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"> $ </span>ramble<span class="w"> </span>on
<span class="go">or;</span>
<span class="gp"> $ </span>./all_experiments
</pre></div>
</div>
</section>
<section id="analyzing-experiments">
<h2>Analyzing Experiments<a class="headerlink" href="#analyzing-experiments" title="Link to this heading"></a></h2>
<p>Once the experiments within a workspace are complete, the experiments can be
analyzed. This is done through:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>analyze
</pre></div>
</div>
<p>This creates a <code class="docutils literal notranslate"><span class="pre">results</span></code> file in the root of the workspace that contains
extracted figures of merit. If the experiments were successful, this file will
show the following results:</p>
<ul class="simple">
<li><p>Core Time: CPU time (in seconds) spent on the benchmark calculations</p></li>
<li><p>Wall Time: Elapsed real time (in seconds) spent on the benchmark calculations</p></li>
<li><p>Percent Core Time: Core Time / Wall Time</p></li>
<li><p>Nanosecs per day: Nanoseconds of simulation per day at the speed achieved</p></li>
<li><p>Hours per nanosec: Hours required to calculate 1 nanosecond of simulation at
the speed achieved</p></li>
</ul>
</section>
<section id="workspace-directory-structure">
<h2>Workspace Directory Structure<a class="headerlink" href="#workspace-directory-structure" title="Link to this heading"></a></h2>
<p>After analyzing the workspace, you can exmine the structure of the workspace at:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">$RAMBLE_ROOT</span>/var/ramble/workspaces/basic_gromacs
</pre></div>
</div>
<p>Within this directory, you should see the following directories:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">configs</span></code> - Contains all of the configuration files for the workspace</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">experiments</span></code> - Contains all of the experiment execution directories</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code> - Contains all of the input files needed for the experiments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logs</span></code> - Contains all log files from any Ramble command that acts on the workspace</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shared</span></code> - Contains auxiliary files the experiment might need, such as environment variable information for licenses</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">software</span></code> - Contains software environments for the experiments</p></li>
</ul>
</div></blockquote>
</section>
<section id="cleanup-the-workspace">
<h2>Cleanup the Workspace<a class="headerlink" href="#cleanup-the-workspace" title="Link to this heading"></a></h2>
<p>Once you are finished with the tutorial content, ensure you have deactivated
the workspace using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>deactivate
</pre></div>
</div>
<p>Additionally, you can remove the workspace using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ramble<span class="w"> </span>workspace<span class="w"> </span>remove<span class="w"> </span>basic_gromacs
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="1_hello_world.html" class="btn btn-neutral float-left" title="1) Getting Started Running A “Hello World” Experiment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="3_modifying_a_gromacs_experiment.html" class="btn btn-neutral float-right" title="3) Modifying A GROMACS Experiment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Google LLC.
      <span class="lastupdated">Last updated on Apr 09, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>